var a=new getApp,e=a.siteInfo.uniacid;Page({data:{isShow:!1,express:["圆通快递","顺丰快递","中通快递","韵达快递","百世汇通","菜鸟裹裹","申通快递","EMS","天天快递","宅急送","邮政包裹"],expressName:"",send_number:"",borderImg:"../../../../images/icon/address-line.png",orderData:[],type:1,farmSetData:[]},onLoad:function(t){a.util.setNavColor(e);var s=this,r=t.orderid,n=t.type;a.util.request({url:"entry/wxapp/manager",data:{op:"getOrderDetail",orderid:r,uniacid:e,type:n},success:function(a){console.log(a),s.setData({orderData:a.data.orderData,type:n})}}),s.setData({farmSetData:wx.getStorageSync("kejia_farm_setData")})},preventTouchMove:function(){},fahuo:function(){this.setData({isShow:!0})},closeModel:function(){this.setData({isShow:!1})},bindPickerChange:function(a){var e=a.detail.value;this.setData({expressName:this.data.express[e]})},scanCode:function(){var a=this;wx.scanCode({success:function(e){a.setData({send_number:e.result})}})},sendOrder:function(t){var s=this,r=s.data.orderData,n=s.data.expressName,d=s.data.send_number,o=s.data.type;""==d&&(d=t.detail.value.send_number),a.util.request({url:"entry/wxapp/manager",data:{op:"sureSend",uniacid:e,orderid:r.id,express_company:n,send_number:d,type:o},success:function(a){1==a.data.code&&(wx.showToast({title:"发货成功"}),r.status=2,s.setData({orderData:r,send_number:"",isShow:!1}))}})},cancelOrder:function(t){var s=t.currentTarget.dataset.orderid,r=this.data.type,n=this,d=n.data.orderData;1==r?a.util.request({url:"entry/wxapp/manager",data:{op:"cancelOrder",uniacid:e,orderid:s},success:function(a){wx.showModal({title:"提示",content:a.data.msg,success:function(){d.status=5,n.setData({orderData:d})}})}}):2==r?a.util.request({url:"entry/wxapp/manager",data:{op:"cancelGroupOrder",uniacid:e,orderid:s},success:function(a){wx.showModal({title:"提示",content:a.data.msg,success:function(){d.status=5,n.setData({orderData:d})}})}}):3==r&&a.util.request({url:"entry/wxapp/manager",data:{op:"cancelIntrgralOrder",uniacid:e,orderid:s},success:function(a){wx.showModal({title:"提示",content:a.data.msg,success:function(){d.status=5,n.setData({orderData:d})}})}})}}); 
